{% extends "base.html" %}
{% load crispy_forms_tags %} {# Assuming you have django-crispy-forms installed and configured #}

{% block title %}{{ form_title }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1>{{ form_title }}</h1>
    <hr>

    <form method="post" novalidate>
        {% csrf_token %}

        {# Render the form using crispy_forms for better layout #}
        {% crispy form %}

        {# Fallback if crispy_forms is not used: #}
        {# {{ form.as_p }} #}

        <div class="mt-3">
            <button type="submit" class="btn btn-primary">Save</button>
            {# Determine the cancel URL based on the object type if possible #}
            {% if instance %}
                {% if instance|class == 'LLC' %}
                    <a href="{% url 'rentals:llc_list' %}" class="btn btn-secondary">Cancel</a>
                {% elif instance|class == 'Property' %}
                    <a href="{% url 'rentals:property_list' %}" class="btn btn-secondary">Cancel</a>
                {% elif instance|class == 'Tenant' %}
                    <a href="{% url 'rentals:tenant_list' %}" class="btn btn-secondary">Cancel</a>
                {% elif instance|class == 'Payment' %}
                    <a href="{% url 'rentals:payment_list' %}" class="btn btn-secondary">Cancel</a>
                {% else %}
                     {# Generic fallback - might need adjustment #}
                     <a href="{% url 'rentals:dashboard' %}" class="btn btn-secondary">Cancel</a>
                {% endif %}
            {% else %}
                 {# Fallback for add forms - might need adjustment based on context #}
                 {# This part is tricky without knowing which add form it is generically #}
                 {# Consider passing a 'cancel_url' in the context for add views #}
                 <a href="{{ request.META.HTTP_REFERER|default:request.get_full_path }}" class="btn btn-secondary">Cancel</a>
            {% endif %}
        </div>
    </form>
</div>

<!--
{# Simple template filter to get class name - add this to a templatetags file if needed #}
{# Or pass object_type in context for edit views #}
{#% comment %#}
To make `instance|klass` work, create `rentals/templatetags/rental_extras.py`:
from django import template
register = template.Library()
@register.filter(name='klass')
def klass(value):
    return value.__class__.__name__
Then load it in the template: {% load rental_extras %}
{#% endcomment %#}

{#% endblock %#}
-->