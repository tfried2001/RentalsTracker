<!-- /workspaces/python/rent_tracker/templates/rentals/property_list.html -->
{% extends "base.html" %}

{% block title %}Properties - {{ block.super }}{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
      <h1>Properties</h1>
      {# Conditionally show the 'Add Property' button #}
      {% if perms.rentals.add_property %}
          {# Assume you have a URL named 'property_add' for adding properties #}
          <a href="#" class="btn btn-primary">Add New Property</a>
          {# Replace '#' with {% url 'rentals:property_add' %} when the view/URL exists #}
      {% endif %}
  </div>

  {% if properties %}
      <table class="table table-striped table-hover">
          <thead>
              <tr>
                  <th>Address</th>
                  <th>LLC</th>
                  <th>Status</th>
                  <th>Rent</th>
                  <th>Bed/Bath</th>
                  {% if perms.rentals.change_property or perms.rentals.delete_property %}
                  <th>Actions</th>
                  {% endif %}
              </tr>
          </thead>
          <tbody>
              {% for property in properties %}
                  <tr>
                      <td>{{ property.street_number }} {{ property.street_name }}</td>
                      <td>{{ property.llc.name }}</td>
                      <td>{{ property.get_status_display }}</td>
                      <td>${{ property.rent_amount }}</td>
                      <td>{{ property.bedrooms }} / {{ property.bathrooms }}</td>
                      {# Conditionally show Edit/Delete links #}
                      {% if perms.rentals.change_property or perms.rentals.delete_property %}
                      <td>
                          {% if perms.rentals.change_property %}
                              {# Assume URL 'property_edit' taking property.id #}
                              <a href="#" class="btn btn-sm btn-outline-secondary me-1">Edit</a>
                              {# Replace '#' with {% url 'rentals:property_edit' property.id %} #}
                          {% endif %}
                          {% if perms.rentals.delete_property %}
                              {# Assume URL 'property_delete' taking property.id #}
                              <a href="#" class="btn btn-sm btn-outline-danger">Delete</a>
                              {# Replace '#' with {% url 'rentals:property_delete' property.id %} #}
                          {% endif %}
                      </td>
                      {% endif %}
                  </tr>
              {% endfor %}
          </tbody>
      </table>
  {% else %}
      <p>No properties found.</p>
  {% endif %}
</div>{% endblock %}
